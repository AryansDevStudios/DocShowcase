{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 85, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/preview-pane.tsx"],"sourcesContent":["'use client';\n\nimport React from 'react';\nimport ReactMarkdown from 'react-markdown';\nimport remarkGfm from 'remark-gfm';\nimport Latex from 'react-latex-next';\nimport type { DocType } from '@/app/actions';\n\nconst renderers = {\n  p: (paragraph: { children?: React.ReactNode, node?: any }) => {\n    const { node } = paragraph;\n\n    // Check if the paragraph contains a single text node that is a latex block\n    if (node.children.length === 1 &&\n        node.children[0].type === 'text' &&\n        /^\\$\\$[\\s\\S]*\\$\\$$/.test(node.children[0].value)) {\n      return <Latex>{node.children[0].value}</Latex>;\n    }\n    \n    // Check if the paragraph contains an inline code element that is a latex block\n    if (node.children.length === 1 &&\n        node.children[0].tagName === 'code' &&\n        node.children[0].children.length > 0 &&\n        /^\\$\\$[\\s\\S]*\\$\\$$/.test(node.children[0].children[0].value)) {\n        return <Latex>{node.children[0].children[0].value}</Latex>\n    }\n    \n    // This is to prevent <pre> being a descendant of <p>\n    // which causes a hydration error.\n    if (node.children.length === 1 && node.children[0].tagName === \"code\") {\n      const child = node.children[0];\n      const childString = child.children[0]?.value || '';\n      // If it's a block code (not inline and not latex)\n      if (child.tagName === 'code' && !/^\\$[\\s\\S]*\\$$/.test(childString)) {\n         return paragraph.children;\n      }\n    }\n\n\n    // Otherwise, render as a normal paragraph\n    return <p>{paragraph.children}</p>;\n  },\n  code: (props: { inline?: boolean, children: React.ReactNode, className?: string, node?: any }) => {\n    const { inline, children, className } = props;\n    const childString = String(children);\n\n    if (inline) {\n        // This is for inline latex like $...$\n        if (childString.startsWith('$') && childString.endsWith('$')) {\n            return <Latex>{childString}</Latex>;\n        }\n        return <code className={className}>{children}</code>;\n    }\n    \n    // This is for block latex in code blocks like $$...$$\n    if (/^\\$\\$[\\s\\S]*\\$\\$$/.test(childString)) {\n      // We return null here because the 'p' renderer will handle it.\n      return null;\n    }\n\n    // This handles code blocks from markdown that aren't latex\n    return <pre><code className={className}>{children}</code></pre>;\n  }\n};\n\n\nexport default function PreviewPane({ content, type }: { content: string; type: DocType }) {\n  return (\n    <div className=\"preview-content h-full\">\n      {type === 'markdown' && (\n        <ReactMarkdown\n          remarkPlugins={[remarkGfm]}\n          components={renderers}\n        >\n          {content}\n        </ReactMarkdown>\n      )}\n      {type === 'html' && (\n        <iframe\n          srcDoc={content}\n          title=\"HTML Preview\"\n          sandbox=\"allow-scripts allow-modals\"\n          className=\"w-full h-full border-0\"\n        />\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAGA;AACA;AACA;AALA;;;;;AAQA,MAAM,YAAY;IAChB,GAAG,CAAC;QACF,MAAM,EAAE,IAAI,EAAE,GAAG;QAEjB,2EAA2E;QAC3E,IAAI,KAAK,QAAQ,CAAC,MAAM,KAAK,KACzB,KAAK,QAAQ,CAAC,EAAE,CAAC,IAAI,KAAK,UAC1B,oBAAoB,IAAI,CAAC,KAAK,QAAQ,CAAC,EAAE,CAAC,KAAK,GAAG;YACpD,qBAAO,8OAAC,6JAAA,CAAA,UAAK;0BAAE,KAAK,QAAQ,CAAC,EAAE,CAAC,KAAK;;;;;;QACvC;QAEA,+EAA+E;QAC/E,IAAI,KAAK,QAAQ,CAAC,MAAM,KAAK,KACzB,KAAK,QAAQ,CAAC,EAAE,CAAC,OAAO,KAAK,UAC7B,KAAK,QAAQ,CAAC,EAAE,CAAC,QAAQ,CAAC,MAAM,GAAG,KACnC,oBAAoB,IAAI,CAAC,KAAK,QAAQ,CAAC,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,KAAK,GAAG;YAC9D,qBAAO,8OAAC,6JAAA,CAAA,UAAK;0BAAE,KAAK,QAAQ,CAAC,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,KAAK;;;;;;QACrD;QAEA,qDAAqD;QACrD,kCAAkC;QAClC,IAAI,KAAK,QAAQ,CAAC,MAAM,KAAK,KAAK,KAAK,QAAQ,CAAC,EAAE,CAAC,OAAO,KAAK,QAAQ;YACrE,MAAM,QAAQ,KAAK,QAAQ,CAAC,EAAE;YAC9B,MAAM,cAAc,MAAM,QAAQ,CAAC,EAAE,EAAE,SAAS;YAChD,kDAAkD;YAClD,IAAI,MAAM,OAAO,KAAK,UAAU,CAAC,gBAAgB,IAAI,CAAC,cAAc;gBACjE,OAAO,UAAU,QAAQ;YAC5B;QACF;QAGA,0CAA0C;QAC1C,qBAAO,8OAAC;sBAAG,UAAU,QAAQ;;;;;;IAC/B;IACA,MAAM,CAAC;QACL,MAAM,EAAE,MAAM,EAAE,QAAQ,EAAE,SAAS,EAAE,GAAG;QACxC,MAAM,cAAc,OAAO;QAE3B,IAAI,QAAQ;YACR,sCAAsC;YACtC,IAAI,YAAY,UAAU,CAAC,QAAQ,YAAY,QAAQ,CAAC,MAAM;gBAC1D,qBAAO,8OAAC,6JAAA,CAAA,UAAK;8BAAE;;;;;;YACnB;YACA,qBAAO,8OAAC;gBAAK,WAAW;0BAAY;;;;;;QACxC;QAEA,sDAAsD;QACtD,IAAI,oBAAoB,IAAI,CAAC,cAAc;YACzC,+DAA+D;YAC/D,OAAO;QACT;QAEA,2DAA2D;QAC3D,qBAAO,8OAAC;sBAAI,cAAA,8OAAC;gBAAK,WAAW;0BAAY;;;;;;;;;;;IAC3C;AACF;AAGe,SAAS,YAAY,EAAE,OAAO,EAAE,IAAI,EAAsC;IACvF,qBACE,8OAAC;QAAI,WAAU;;YACZ,SAAS,4BACR,8OAAC,wLAAA,CAAA,UAAa;gBACZ,eAAe;oBAAC,6IAAA,CAAA,UAAS;iBAAC;gBAC1B,YAAY;0BAEX;;;;;;YAGJ,SAAS,wBACR,8OAAC;gBACC,QAAQ;gBACR,OAAM;gBACN,SAAQ;gBACR,WAAU;;;;;;;;;;;;AAKpB","debugId":null}}]
}